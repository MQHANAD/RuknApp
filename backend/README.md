# باك إند مشروع ركن (RuknApp Backend)

هذا هو خادم الباك إند لتطبيق ركن (RuknApp) للبحث عن المواقع الذكية. يوفر هذا الخادم واجهات برمجة التطبيقات (APIs) للحصول على توصيات المواقع الذكية بناءً على نوع العمل التجاري.

## الإعداد

### متطلبات النظام

- Node.js (الإصدار 16 أو أحدث)
- npm أو yarn

### الخطوات

1. قم بتثبيت التبعيات:

```bash
cd backend
npm install
```

2. قم بإنشاء ملف `.env` في مجلد `backend` وأضف ما يلي:

```
PORT=3000
SUPABASE_URL=your_supabase_url_here
SUPABASE_KEY=your_supabase_anon_or_service_key_here
```

ملاحظة: لا تقم بمشاركة مفاتيحك الحقيقية في المستودع العام.

3. قم بتشغيل الخادم:

```bash
npm start
```

للتطوير مع إعادة التحميل التلقائي:

```bash
npm run dev
```

## واجهات API المتاحة

### الحصول على توصيات المواقع

```
GET /api/recommendations/:businessType?count=5
```

مثال:
```
GET /api/recommendations/barber?count=5
```

سيعيد أفضل 5 مناطق لفتح صالون حلاقة.

### الحصول على أنواع الأعمال المدعومة

```
GET /api/business-types
```

### التحقق من حالة الاتصال بقاعدة البيانات

```
GET /api/status
```

### التحقق من صحة الخادم

```
GET /health
```
يرجع `{ ok: true }` عندما يكون الخادم قيد التشغيل.

## الخوارزمية

تستخدم الخوارزمية الأوزان التالية لتقييم المناطق:

- **w_pop**: وزن لشعبية المنطقة
- **w_rat**: وزن لتقييمات المستخدمين
- **w_comp**: وزن لمستوى المنافسة (وزن سلبي)

أنواع الأعمال المدعومة:

- barber (صالون حلاقة)
- gym (صالة رياضية)
- gas_station (محطة وقود)
- laundry (مغسلة)
- pharmacy (صيدلية)
- supermarket (سوبر ماركت)
